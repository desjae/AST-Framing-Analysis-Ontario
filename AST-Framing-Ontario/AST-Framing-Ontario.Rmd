---
title: How is active school travel framed in Ontario, Canada?
author:
  - name: Author 1
    email: author1@example.com
    affiliation: Some Department
    footnote: 1
  - name: Author 2
    email: author2@example.com
    affiliation: Some Department
  - name: Author 3
    email: author3@example.com
    affiliation: Another University
    footnote: 2
  - name: Author 4
    email: author4@example.com
    affiliation: Some Institute
    footnote: 2
  - name: Author 5
    email: author5@example.com
    affiliation: Some University
  - name: Author 6
    email: author6@example.com
    affiliation: Some Department
address:
  - code: Some Department
    address: Department, Street, City, Province, Postal Code
  - code: Another University
    address: Department, Street, City, Province, Postal Code
  - code: Some Institute
    address: Street, City, Province, Postal Code
  - code: Some University
    address: Department, Street, City, Province, Postal Code
footnote:
  - code: 1
    text: "Corresponding Author"
  - code: 2
    text: "Equal contribution"
abstract: |
  
  Active school travel (AST) has been increasingly encouraged by various stakeholders in Ontario, Canada through efforts such as school travel planning. Education strategies like workshops or resources that promote AST are commonly implemented. The framing of AST through such strategies may influence how walking and bicycling to school are perceived by parents. It may also draw attention to AST as an issue affecting children's health which could motivate behaviour change. We used natural language processing, including topic modelling, to examine how AST is framed in publicly available documents from Ontario stakeholders involved in school travel planning. We then compared the findings from these documents to a selection of studies on AST and explored similarities between the two. We found that AST is framed in two ways: i) as a health and environmental issue; and ii) as an accessible and feasible transport option for children and parents. The frames encourage children and parents to adopt AST given its health and environmental benefits by providing resources to support behaviour change. The benefits of AST and strategies to support AST that are communicated by stakeholders are consistent with the evidence from academic research. While these frames present AST in a positive light, they may not encourage parents to view current household travel behaviours as unhealthy for their children or their community. Stakeholders promoting AST in Ontario should further problematize the decline of AST and challenge the norm of driving children to school.
  
  Keywords: active school travel, school travel planning; natural language processing; framing analysis; education strategies 
  

journal: "Social Science & Medicine"
date: "`r Sys.Date()`"
bibliography: [bibliography.bib, packages.bib]
linenumbers: false
#numbersections: true
csl: elsevier-harvard.csl
output: rticles::elsevier_article
---

```{r echo=FALSE}
rm(list = ls())
```

```{r load-packages, include=FALSE}
library(DiagrammeR)
library(dplyr)
library(ggraph)
library(ggplot2)
library(igraph)
library(kableExtra)
library(pdftools)
library(readr)
library(reshape2)
library(stringr)
library(text2vec)
library(textdata)
library(tidyr)
library(tidytext)
library(tm) 
library(tools)
library(topicmodels)
library(widyr)
library(word2vec)
library(wordcloud)
library(ldatuning)
library(quanteda)
```

```{r load-data, include=FALSE}
load(file= "Corpus .rda/academic_corpus_repaired.rda")
load(file= "Corpus .rda/municipal_corpus.rda")
load(file= "Corpus .rda/consortium_corpus.rda")
load(file= "Corpus .rda/school_corpus.rda")
load(file= "Corpus .rda/policy_corpus.rda")
load(file= "Corpus .rda/raw_policy_corpus.rda")
```

```{r package-bib, include=FALSE}
# This function is used to write a bibliography for the `R` packages used in the paper
knitr::write_bib(file = 'packages.bib')
```
  
\newpage

1. Introduction
===============

Rates of walking and bicycling to school, commonly known as active school travel (AST), have been declining in Canada and the United States for decades [@rothmanDeclineActiveSchool2018]. However, the appetite for AST may be high in many Canadian communities. For instance, in a study conducted in Toronto, Ontario, 40% of children who were driven to school stated they would like to travel by bicycle instead [@laroucheRatherBikeSchool2016]. The study also reported that less than 3% of respondents actually cycled, despite the vast majority having access to a bicycle and living within a short and bikeable distance to school. Another study based in London, Ontario, reported similar findings with respect to children's preference for active travel [@larsenRouteBasedAnalysisCapture2012]. From a public health perspective, increasing the use of active modes to school represents a major opportunity to improve children's health and wellbeing.

The Government of Ontario, in Canada, has striven to promote this trend, and created a fund in 2017 to support communities across the province to develop AST initiatives. Green Communities Canada runs the program, called _Ontario Active School Travel_ [@GreenCommunities2016]. As of December 2021, OAST has awarded over CAD 2 million and provided resources to over 25 projects across Ontario. Many communities implemented school travel planning (STP), along with encouraging activities like walking school buses and developed resources for schools and parents, among other actions [see @GreenCommunitiesProjects]. In this context, STP is a popular "school-specific" intervention led by a facilitator who brings together a committee of stakeholders from diverse sectors including education, planning, transportation, and public health to develop action plans [@buliungSchoolTravelPlanning2011; @mammenSchoolTravelPlanning2014]. The five-step process involves identifying barriers to AST based on the local context and implementing approaches or activities that make AST safer and more convenient: 1) setup of the program; 2) data collection and problem identification; 3) action planning; 4) implementation; 5) monitoring and evaluation [@buliungSchoolTravelPlanning2011; @langUnderstandingModalChoice2011].

How AST is framed by STP stakeholders to a target audience, like parents or the general public, may raise awareness of the issue and influence how walking and bicycling to school are perceived. Gamson and Modigliani [-@gamsonChangingCulture1987] define a frame as a “central organizing idea or story line that provides meaning” to a particular phenomenon. A frame can enable individuals "to locate, perceive, identify, and label" information pertaining to various dimensions of an issue [@goffmanFrameAnalysisEssay1974]. Therefore, stakeholders involved in STP efforts can play a role in shaping public perception about AST in such a way that it attracts greater attention and is recognized as a "problem" that needs to be addressed through behaviour change or new policies.

After significant investment of human and financial resources to boost rates of AST in Ontario over the past few years, we ask this central question: How is AST framed to the public? The following questions are subsidiary and help us address this main question: What benefits of AST are communicated to the public? What solutions are proposed to increase rates of AST? 

In this paper, we use natural language processing to examine how three STP stakeholder groups in Ontario (municipalities, school boards, and transportation consortia) frame the issue of AST. We assembled a corpus of texts from public sources that present information for the general public or parents who are interested in AST. We examine word frequency, bigrams, and concordances in these selected documents, and also identify key topics presented by each stakeholder group. We then compare the findings from these documents to a selection of studies on AST and explore the extent to which there is concordance between the literature on AST and materials shared with the public. 

2. Literature Review
======================

## 2.1. Benefits of active school travel

There is value in communicating the benefits of AST to the public in order to convey the importance of this issue. The desire to increase AST in Canada is certainly warranted - there is compelling evidence of the physical and mental health benefits that children who actively commute to school attain. Faulkner et al. [-@faulknerActiveSchoolTransport2009] concluded from their systematic review that children who travel on foot or by bicycle to school generally have higher levels of physical activity than their peers who are driven to school. However, Schoeppe et al. [-@schoeppeAssociationsChildrenActive2015] reported no association between AST and physical activity in their cross-sectional study. This relationship could be dose-dependent, meaning that children would have to travel longer distances to accumulate physical activity. A walking distance of 1000-1600 metres to school has been found to contribute to overall levels of physical activity for boys [@faulknerSchoolTravelChildren2013]. The daily routine of travelling to school can be a good opportunity for children to regularly build physical activity into their schedule [@mitraIndependentMobilityMode2013]. Research has also shown that using active modes to school contributes to improve cardiovascular fitness [@borrestadExperiencesRandomisedControlled2012].

More recently, the literature has explored the link between transport and children's wellbeing [@waygoodTransportChildrenWellbeing2020], with relevant applications to the study of travel satisfaction [@vandenbergFactorsAffectingParental2020; @westmanChildrenTravelSchool2017]. Being driven to school reduces community interactions for children, which may negatively impact their social wellbeing [@waygoodChildrenTravelIncidental2015]. In contrast, walking and bicycling give children opportunities to socialize with friends or siblings [@michailChildrenExperiencesTheir2021] and increase positive emotions that contribute to wellbeing [@ramanathanHappinessMotionEmotions2014a]. This is something that children seem to value [@zwertsHowChildrenView2010] and that tracks with findings among university students [@paezEnjoymentCommuteComparison2010]. More generally, social connections through travel appear to be important for wellbeing. Furthermore, AST can provide opportunities for children to engage with natural environments [@fuscoUnderstandingChildrenPerceptions2012; @romeroChildrenExperiencesEnjoyment2015].

## 2.2. Factors that influence active school travel and mode choice

Factors that influence AST have been presented and organized using a socio-ecological model (SEM) [@mitraIndependentMobilityMode2013] or systems model [@badlandDevelopmentSystemsModel2016] whereby children's travel behaviour is understood within the context of household, social, neighbourhood, and policy environments. The SEM comes from the field of public health and is a useful framework for understanding complex health behaviours, such as walking and bicycling habits, This model helps to identify multiple determinants that need to be addressed by interventions to facilitate behaviour change. The consensus in the literature is that interventions should target multiple levels in order to increase levels of healthy and physically active modes of travel to school [@mitraIndependentMobilityMode2013]. Rather than describing an extensive list of factors that influence AST and mode choice in Canada [e.g., @mammenUnderstandingDriveEscort2012; @mitraIndependentMobilityMode2013; @rothmanDeclineActiveSchool2018; @wilsonUnderstandingChildParent2018], we discuss a few potentially modifiable determinants that may be targeted for change through STP.

At the individual level, age is often positively associated with AST [@mammenUnderstandingDriveEscort2012; @starkExploringIndependentActive2018; @wilsonUnderstandingChildParent2018]. There is evidence that gender is a determinant of AST, and that boys are more likely to travel using active modes than girls, although this is not a strong or consistent finding [@rothmanDeclineActiveSchool2018; @schoeppeAssociationsChildrenActive2015]. Children's mode choice to school is strongly influenced by their parents' travel behaviours and the complexity of their household's travel needs [@buliungLivingJourneySchool2021], as well as daily parental support [@mahDoesParentalSupport2017a]. This indicates that shifting parental perceptions and habits is important. Convenience and inclement weather have been cited by parents as barriers to AST [@buliungSchoolTravelPlanning2011]. Parental perceptions of the built or school environment [@demeesterParentalPerceivedNeighborhood2014; @panterAttitudesSocialSupport2010] and their children's skills [@mammenUnderstandingDriveEscort2012; @faulknerWhatQuickestEasiest2010] also influence mode choice to school. 

Distance between home and school is most negatively associated with AST [@ikedaAssociationsChildrenActive2018; @mammenUnderstandingDriveEscort2012; @pontEnvironmentalCorrelatesChildren2009; @rothmanDeclineActiveSchool2018] with less AST reported among children who have to travel farther to school - low density suburban development tends to increase the need for movement, and the reliance on motorized modes [@farberRunning2011]. Many studies have also found that the quality of the built environment along the route to school and around the school site [@ikedaAssociationsChildrenActive2018; @rothmanActiveSchoolTransportation2021] and provision of active travel infrastructure [@chenPromotingActiveStudent2018; @pontEnvironmentalCorrelatesChildren2009] facilitate AST. Canadian youth report that they feel most safe bicycling on streets in their neighbourhood or that have low volumes of traffic [@TACbikeinfra2020]. Finally, concerns about traffic and strangers have been reported by parents who drive their children to school [@mammenUnderstandingDriveEscort2012], which highlights that the volume and speed of cars can be a concern or deterrent for AST.

## 2.3. School travel planning in Canada

School travel planning (STP) has been implemented in Canada since at least the late 2000s. Within the STP process, facilitators generally establish multi-sector committees which intervene at the participating school through a range of activities related to the 4E's consisting of _education_ strategies, _encouragement_ through in-person events or programs, _engineering_ improvements to or around the school site, and _enforcement_ of traffic speeds around schools [@langUnderstandingModalChoice2011; @mammenActiveSchoolTravel2014]. The first large-scale evaluation of STP as an intervention in Canada took place at twelve schools across the country, including four in Ontario, using parental surveys to measure changes in travel behaviour and perceptions [@buliungSchoolTravelPlanning2011]. Following the intervention, active travel rates increased across all schools and 14% of parents reported a perceived reduction in traffic outside the school [@buliungSchoolTravelPlanning2011]. Assessments of the efficacy of STP [@buttazzoniPromotingActiveSchool2019; @mammenActiveSchoolTravel2014] indicate that it has the potential to encourage behaviour change and adoption of AST. STP facilitators have recommended that additional time and resources are needed to improve the efficacy of STP [@mammenPuttingSchoolTravel2015], which highlights that long-term and sustained efforts driven at the policy level are required to address declining rates of AST. 

How AST is framed seems particularly important to shift parental attitudes and perceptions, given their reported influence on children's travel mode to school. STP activities heavily focus on education or encouragement [@buliungSchoolTravelPlanning2011; @mammenActiveSchoolTravel2014; @buttazzoniSupportingActiveSchool2018], but parents may not always be receptive to the goals of STP and may be resistant to behaviour change [@buttazzoniSupportingActiveSchool2018]. Parents have been found to express different understandings, language, and perceptions than planners of how the built environment can influence school travel [@buliungLivingJourneySchool2021]. This is also true when it comes to other factors like convenience of different modes to school [@langUnderstandingModalChoice2011]. STP stakeholders must pay special attention to parents' understanding of the decline of AST as a problem, which may affect their receptivity to proposed solutions.   

The “central organizing idea or story line" of AST, to apply the definition of framing from Gamson and Modigliani [-@gamsonChangingCulture1987], could also affect broader support in the community. Municipal representatives are perceived to be instrumental but the involvement of other stakeholder groups (e.g., busing consortia representatives and local residents) can be lacking [@buttazzoniSupportingActiveSchool2018]. In Ontario, it is reasonable to say that AST has become a policy issue on the education and public health agendas, supported, albeit in a modest way, by financial contributions from the provincial government^[To put the CAD 2 million invested by the province in the Ontario Active School Travel program in perspective, a city such as Hamilton budgeted in excess of CAD 91 million on road maintenance and construction in 2016 alone; see: https://www.hamilton.ca/budget-finance/city-budgets/2016-tax-and-rate-budgets]. Still, the support from a range of municipal representatives [see @buttazzoniSupportingActiveSchool2018; @mammenPuttingSchoolTravel2015] demonstrates that the AST issue is on the political agenda. However, it is unknown to what degree the general public (i.e., local residents) has been exposed to messaging about AST.

The success of STP interventions would likely depend on parental judgments of factors that are related to school travel, as well as support from key policy makers. For example, parents have been found to view mixed land use as conducive for driving, despite transport planners viewing neighbourhoods with mixed uses as key for encouraging more active travel [@buliungLivingJourneySchool2021]. Therefore, stakeholders involved in STP must make conscious choices about the proposed solutions and potential benefits of AST that are communicated to parents and the general public to convey its importance as a policy issue and to facilitate adoption of AST. Publicly available content about AST needs to effectively engage multiple audiences on this policy issue, including parents, children, politicians, and school representatives. This information should reflect current knowledge from research on school travel, plus content specific to local factors that influence AST, so that the challenges of AST are adequately defined and the opportunities or solutions to address the problems are clear. 

## 2.4. Framing Analysis

Issues that pertain to public health or wellbeing are often presented to the public through particular frames to influence perceptions or behaviours. As previously mentioned, a frame is a "central organizing idea or story line that provides meaning" to a public issue or phenomenon [@gamsonChangingCulture1987]. Scholars in the field of political communications have proposed that communicators, such as the media or institutions, construct the narrative of a frame for policy positions or public issues in order to activate or restrict a particular response in the intended audience [@panFramingAnalysisApproach1993]. Organized groups of stakeholders can employ similar methods to attract attention to particular issues. Framing can be used to position existing solutions as suitable to address particular issues [@mahFramecriticalPolicyAnalysis2014], which may prevent the public from being aware of other policy approaches that challenge the status quo. The way policy issues are framed is ultimately important to understand because it plays a role in either altering or preserving the existing social perceptions. Finally, the ideas that are communicated by a particular frame can be either positive or negative [@waygoodCO2ValenceFraming2018]. There is evidence that negative framing may be more effective at motivating individuals to change transport modes to reduce CO2 emissions [@waygoodCO2ValenceFraming2018].

Framing of issues is an important step in developing health policy. An obvious example over the past decade is the framing of climate change as a public health issue [e.g., @depouxCommunicatingClimateChange2017; @maibachReframingClimateChange2010; @weathersDevelopmentsFramingClimate2016] to increase public engagement and awareness of the issue. This framing has slowly advanced this issue on public policy agendas as public attention puts pressure on the policy stream to adopt frameworks for action. For example, transport planners use different frames to guide the extent to which transport policies can be adapted to address climate change. In a recent paper [@reynardGrowthResilienceHow2021], framing analysis was applied to review the representation of issues such as mobility and social exclusion in municipal policies from four western Canadian cities under the current circumstances of climate change. The authors found four primary frames: “The Growing City”, “If You Build It, They Will Come”, “Better City for All”, and a “the Resilient City” [@reynardGrowthResilienceHow2021]. Each frame presented the nature, opportunities, and challenges of climate change in different ways which set the stage for the types of mitigation and adaptation strategies that cities were proposing to address this issue. 

In a similar way, we hypothesize that STP stakeholder groups in Ontario have framed AST in particular ways to engage multiple audiences on this policy issue including parents, local residents, school representatives, and municipal representatives. These groups are likely identifying points of intervention and potential opportunities to build support for and encourage AST.

3. Data
===============

## 3.1. Data retrieval

### 3.1.1. Policy documents

We assembled a collection of publicly available documents that were sourced online from the main stakeholder groups involved in STP initiatives in Ontario: i) school boards (public or Catholic and English-speaking only); ii) municipal governments; and iii) transportation consortia. The latter are a unique group of entities sanctioned by Ontario's Ministry of Education in Ontario 2006. Each consortium involves a collaboration between municipal regions and school boards; the consortium's objective is to deliver more efficient and timely transportation services to schools in each region. Non-profit organizations, police services, and advocacy groups are other stakeholders who often play a role in supporting AST and/or STP, but this study does not include any documents from these groups because they are not consistently participating in all initiatives across Ontario. 

The search was guided first by a list of all English public and Catholic school boards across Ontario. The websites of each school board were manually searched for pages related to school transport or travel. Any pages relevant to these topics were manually downloaded. Next, we collected documents by searching municipal government and transportation consortia websites. These were identified based on geographic area (i.e., the municipalities and/or transportation consortia that are in the same geographic area of each school board). Webpages related to active transport or school travel were manually downloaded. 

Webpages from STP stakeholder groups were included in our analysis if they were easy to find. This primary criterion was important since our analysis pertains to how such issues are framed to the general public. Thus, we included only webpages that were readily accessible, which we defined as requiring no more than 4 separate links from the initial Google search.

The initial corpus of documents from STP stakeholder groups included 69 relevant webpages (i.e., one page or more). We refer to these as policy documents throughout the paper. It is important to note that school boards, municipalities, and transportation consortia may or may not publish information about their involvement in AST and STP efforts on their respective websites or in policy documents. Search results are summarized in Table \ref{tab:policy-documents}.

```{r policy-documents, echo=FALSE}
data_tbl <- data.frame(
  Stakeholder = c("School boards", "Municipalities", "Transportation consortia"),
  Total = c("62", "62", "39"),
  Retrieved = c("32", "28", "9")
)

kable(data_tbl,
      "latex",
      booktabs = TRUE,
      caption = "\\label{tab:search-results}Search results from the main STP stakeholder groups.") %>%
  kable_paper(full_width = F) %>%
  column_spec(1, bold = T, border_right = T) %>%
  column_spec(3, border_left = T) %>%
  kable_styling(latex_options = c("striped"))
```

### 3.1.2. Academic papers

We conducted a search on Web of Science for scholarly papers on the topic of travel to school. We limited our search to the fields of public health, transportation, planning, urban studies, and geography. This initial corpus was curated by the authors to ensure that all documents were relevant; for example, some hits in our search were not full papers but conference reports, or they dealt with travel to school only peripherally. After this step, we assembled a collection of 227 journal articles for analysis.

## 3.2. Data cleaning

A multi-step process was conducted to ensure that the analysis captured as much text as possible from both the policy documents (n = 64) and academic papers (n = 227). To begin, the webpages, which were manually downloaded in portable document format (PDF), were trimmed so that pages that only consisted of tables, figures, or references were removed. Many academic papers were in a two-column format, which is not ideal for conversion to `txt`. Two-column PDF documents were processed to extract the text in the correct sequence. Four academic papers did not join sufficiently and were taken out of the corpus due to the substantial time required to manually correct their inconsistencies.

Next, we converted the trimmed PDF documents into `txt` files so that they could be imported for analysis in `R`. The next phase was to manually remove any remaining tables, figures, references, headers/footings, and captions that could not be trimmed. Manual corrections were also required for certain pages in academic papers that remained in two-column format after the conversion process. This typically occurred on pages that had a table or figure that disrupted the text. Finally, we reviewed all of the documents to remove hyphenation by line breaks and to keep hyphenated words together on the same line. Any ligatures (e.g., combinations of characters or letters that were not properly detected during the conversion process) were fixed.

We also manually removed any extraneous material that did not pertain to AST specifically. For the academic papers, this included footnotes, references, acknowledgments, and conflict of interest statements. For the policy+practice documents, it included phone numbers, inserted links to other webpages, personal names, and content not specific to AST. In the final step, we removed all blank spaces, punctuation, capitalization, and numbers. English stop words, which are common words such as _and_ or _the_ as identified in a predetermined list by Feinerer and Hornik [-@R-tm] and other frequent terms in the documents like "school" and specific location names, were removed from the corpora.  

4. Methods
===============

## 4.1. Process of Framing Analysis

We use topic modelling in `R` to conduct the framing analysis. Topic modelling is a machine learning technique used to analyze text to identify the language and concepts being communicated. This method is practical for researchers working with large amounts of text because it replaces the manual coding of topics that would normally take place to analyze or summarize textual data [@jacobiQuantitativeAnalysisLarge2016]. In the data pre-processing phase, we tokenize the text in the documents and create a document-term matrix so that it is in the correct format for analysis. We primarily use the following packages: `tidytext` [@R-tidytext], `topicmodels` [@R-topicmodels], `word2vec` [@R-word2vec], and `wordcloud` [@R-wordcloud] to examine text in the documents that were sourced for this project. These packages have functions for determining the frequency of specific words in each document or relationships (e.g., pairs of adjacent terms called bigrams) and correlations between words. Topic modelling is a popular method for analyzing text from social media platforms [@albalawiUsingTopicModeling2020] and news articles [@jacobiQuantitativeAnalysisLarge2016]. We estimate latent Dirichlet allocation (LDA) models to classify both the STP and academic documents according to the topics that are contained within them. This method "treats each document as a mixture of topics, and each topic as a mixture of words" [@silgeTextMining2021]. The model's output is "a set of topics consisting of clusters of words that co-occur in these documents according to certain patterns" [@jacobiQuantitativeAnalysisLarge2016]. Researchers must then interpret the identified topics, as done after other methods of manual coding. We also compare the topics between the policy documents and the academic papers to interpret what is being communicated by STP stakeholders. We describe in more detail the functions and code in `R`  that we used.

## 4.3. Reproducibility

This paper is an example of open and reproducible research that uses only open software. Following best practices in spatial data science [@brunsdon2020opening], the code and data needed to reproduce our research or conduct a similar analysis for other regions are available for download upon request. 

5. Results
===============

## 5.1. Word and document frequency

We analyzed word and document frequency for each corpus of text. Table \ref{tab:word-table} shows the most frequent terms found in the municipal, transportation consortia, school board, and academic documents. Policy documents and academic papers reference _active_, _travel_, _walking_, _biking_ or _cycling_, and _students_ more than other terms. Each corpus also has _safety_ and _traffic_ as common words which suggests that these are common concerns for parents. The word _physical_ is present in each corpus, but it's not clear what this refers to (e.g, _physical activity_, _physical health_, or the _physical environment_). Furthermore, documents from STP stakeholder groups discuss _resources_, _information_, and _services_ about school travel. Unlike the academic papers, policy documents include the words _route_ or _routes_ as frequent terms. This could indicate the presence of "safe routes to school" in the policy corpus, as well as the role of STP stakeholder groups in identifying safe routes to school to share with parents or families. In the section below, the context in which these terms are used is explored further.

The academic corpus differs from the policy documents in that _parents_ and _distance_ are the second and third most common terms. In addition, _time_, _factors_, _environment_, and _age_ are also identified in the academic papers. The prevalence of these terms is consistent with an academic focus on exploring the variables that influence mode choice. These words are absent from the list of common words in policy documents. Table \ref{tab:word-table} indicates that the academic corpus discusses a broader range of determinants of AST than the policy documents. The number of references for each term in the academic papers is also substantially higher due to the inclusion of more documents.

```{r municipal-term-frequency, echo=FALSE}
# Create new data frame with the cleaned corpus 
MunicipalTextDF <- data.frame(text = sapply(municipal_corpus, as.character), stringsAsFactors = FALSE)

municipal_it_train = itoken(MunicipalTextDF$text, progressbar = FALSE)
municipal_vocab = create_vocabulary(municipal_it_train)

# Cut out terms that have a minimum count of 1 
municipal_vocab <- prune_vocabulary(municipal_vocab, term_count_min = 1)
```

```{r consortia-term-frequency, echo=FALSE}
# Create new data frame with the cleaned corpus 
ConsortiumTextDF <- data.frame(text = sapply(consortium_corpus, as.character), stringsAsFactors = FALSE)

consortium_it_train = itoken(ConsortiumTextDF$text, progressbar = FALSE)
consortium_vocab = create_vocabulary(consortium_it_train)

# Cut out terms that have a minimum count of 1
consortium_vocab <- prune_vocabulary(consortium_vocab, term_count_min = 1)
```

```{r school-term-frequency, echo=FALSE}
# Create new data frame with the cleaned corpus 
SchoolTextDF <- data.frame(text = sapply(school_corpus, as.character), stringsAsFactors = FALSE)

school_it_train = itoken(SchoolTextDF$text, progressbar = FALSE)
school_vocab = create_vocabulary(school_it_train)

# Cut out terms that have a minimum count of 1 
school_vocab <- prune_vocabulary(school_vocab, term_count_min = 1)
```

```{r academic-term-frequency, echo=FALSE}
# Create new data frame with the cleaned corpus 
AcademicTextDF <- data.frame(text = sapply(academic_corpus_repaired, as.character), stringsAsFactors = FALSE)

it_train = itoken(AcademicTextDF$text, progressbar = FALSE)
academic_vocab = create_vocabulary(it_train)

# Cut out terms that have a minimum count of 100 
academic_vocab <- prune_vocabulary(academic_vocab, term_count_min = 100)
```

```{r top-word-frequencies, echo=FALSE}
municipal_words <- municipal_vocab %>% slice(1938:1914)
school_words <- school_vocab %>% slice(1812:1788)
consortia_words <- consortium_vocab[-c(971),] %>% slice(993:968)
academic_words <- academic_vocab[-c(1289, 1284),] %>% slice(1291:1265)
```

```{r word-table, echo=FALSE}
top_words <- cbind(
  municipal_words,
  school_words,
  consortia_words,
  academic_words)

colnames(top_words) <- c("Term", "Count (n)", "Documents (n)", "Term", "Count (n)", "Documents (n)", "Term", "Count (n)", "Documents (n)", "Term", "Count (n)", "Documents (n)")

# add frequency term count / words

kable(top_words,
      "latex",
      booktabs = TRUE,
      col.names = c("Term",
                    "Count (n)",
                    "Documents (n)",
                    "Term",
                    "Count (n)",
                    "Documents (n)",
                    "Term",
                    "Count (n)", 
                    "Documents (n)",
                    "Term",
                    "Count (n)",
                    "Documents (n)"),
      align = c("l", "c", "c", "l", "c", "c", "l", "c", "c", "l", "c", "c"), 
      caption = "\\label{tab:word-table}Top 25 terms identified in each corpus. Document frequencies are also indicated.") %>%
  kable_styling(latex_options = c("striped", "scale_down")) %>%
  add_header_above(c("Municipalities" = 3, "School Boards" = 3, "Transportation Consortia" = 3, "Academic Papers" = 3)) %>%
  footnote(general = " ",
           alphabet = c("Count (n) refers to the total number of times the term is found in the corpora", "Documents (n) refers to the total number of documents that feature the term"))
```

Examination of document frequency reveals terms that are not present in all policy documents. This suggests that although documents pertain to the subject of school travel, not all stakeholders across Ontario are disseminating information about AST. For example, a document may discuss active travel but not to school. Some documents present school travel options by bus but not by active modes. We manually searched the policy corpus and found that 48% of documents mention AST and 16% mention STP. This confirms that many municipalities, school boards, and transportation consortia do not promote AST through their webpages or indicate their involvement in the STP process. Instead, inclement weather and its impacts on busing is a common topic addressed in school board and transportation consortia documents. 

## 5.2. Bigrams and concordances

Bigrams refer to a pair of consecutive words. Figures \ref{fig:city-visual}, \ref{fig:consortia-visual}, and \ref{fig:school-visual} show the bigrams that occur more than 5 times for each set of policy documents. These figures help to make further sense of the word frequencies reported above, and highlight the main ideas that are presented to the public in each of the policy corpora. The directional arrows indicate the arrangement of the words (e.g., active travel and not travel active) and the colour gradient of the arrows corresponds to the most frequently mentioned pairs (e.g., bigrams with darker arrows are found more often).

Municipalities primarily discuss _physical activity_ (n = 53) and _public health_ (n = 19) in the context of AST. In addition, _travel planning_ (n = 19), _bike lanes_ (n = 16), and _safe routes_ (n = 14) are also identified, conceivably as either proposed solutions or built environment factors that support AST. Key issues related to transport such as _traffic safety_ (n = 10), _air quality_ (n = 9), and _greenhouse gases_ (n = 9) are conveyed to the public through these policy documents. It is not surprising to find this focus given that municipalities in Ontario are concerned about climate change and have increasingly looked to active travel to offset transport-related emissions in urban areas. 

Similar bigrams are found in school board documents: _travel planning_ (n = 33), _safe routes_ (n = 15), _physical activity_ (n = 10), and _public health_ (n = 10) are among the most common. Both municipalities and school boards in Ontario seem to emphasize what can be or has been done to improve AST (i.e., policy or planning changes), while outlining some of the benefits of AST at the individual- or community-level to potentially encourage behaviour change (i.e., physical activity for children or improved air quality). Unlike other STP stakeholders, school boards also consider _inclement weather_ (n = 24) and _bus cancellations_ (n = 13). Most likely this is because school boards are mandated to provide transportation to school in Ontario (typically by bus) and this information is presented alongside AST options. Finally, transportation consortia documents highlight topics such as _physical activity_ (n = 10), _pedestrian safety_ (n = 8), _crossing guards_ (n = 6), _travel planning_ (n = 6), and _walk zones_ (n = 6). Biking and cycling are notably absent from transportation consortia documents. Overall, the policy documents appear to convey an emphasis on the built environment, rather than household decision-making. 

```{r city-bigrams, include=FALSE, echo=FALSE}
# Converting corpus to tidytext data type 
td_municipal_corpus <- tidy(municipal_corpus)

# n can be changed 
municipal_bigrams <- td_municipal_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

municipal_trigrams <- td_municipal_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_municipal_bigrams <- municipal_bigrams %>%
  count(bigram, sort = TRUE)

top_municipal_trigrams <- municipal_trigrams %>% 
  count(trigram, sort = TRUE)
```

```{r consortia-bigrams, include=FALSE, echo=FALSE}
# Converting corpus to tidytext data type 
td_consortium_corpus <- tidy(consortium_corpus)

# n can be changed 
consortium_bigrams <- td_consortium_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

consortium_trigrams <- td_consortium_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_consortium_bigrams <- consortium_bigrams %>%
  count(bigram, sort = TRUE)

top_consortium_trigrams <- consortium_trigrams %>% 
  count(trigram, sort = TRUE)
```

```{r school-bigrams, include=FALSE, echo=FALSE}
# Converting corpus to tidytext data type 
td_school_corpus <- tidy(school_corpus)

# n can be changed 
school_bigrams <- td_school_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

school_trigrams <- td_school_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_school_bigrams <- school_bigrams %>%
  count(bigram, sort = TRUE)

top_school_trigrams <- school_trigrams %>% 
  count(trigram, sort = TRUE)
```

```{r policy-bigrams, include=FALSE, echo=FALSE}
# Converting corpus to tidytext data type 
td_policy_corpus <- tidy(policy_corpus)

# n can be changed 
policy_bigrams <- td_policy_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

policy_trigrams <- td_policy_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_policy_bigrams <- policy_bigrams %>%
  count(bigram, sort = TRUE)

top_policy_trigrams <- policy_trigrams %>% 
  count(trigram, sort = TRUE)
```

```{r academic-bigrams, include=FALSE, echo=FALSE}
# Converting corpus to tidytext data type 
td_academic_corpus <- tidy(academic_corpus_repaired)

# n can be changed 
academic_bigrams <- td_academic_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

academic_trigrams <- td_academic_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_academic_bigrams <- academic_bigrams %>%
  count(bigram, sort = TRUE)

top_academic_trigrams <- academic_trigrams %>% 
  count(trigram, sort = TRUE)
```

```{r, include=FALSE}
municipal_bigrams_separated <- municipal_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

municipal_bigram_counts <- municipal_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)

# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

municipal_bigram_graph <- municipal_bigram_counts %>%
  filter(n > 8) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
```

```{r, include=FALSE}
MunicipalTextDF <- data.frame(text = sapply(municipal_corpus, as.character), stringsAsFactors = FALSE)

M_it_train = itoken(MunicipalTextDF$text, progressbar = FALSE)
municipal_vocab = create_vocabulary(M_it_train)

municipal_vocab <- prune_vocabulary(municipal_vocab, term_count_min = 5)
municipal_vocab
```

```{r, include=FALSE}
ConsortiumTextDF <- data.frame(text = sapply(consortium_corpus, as.character), stringsAsFactors = FALSE)

C_it_train = itoken(ConsortiumTextDF$text, progressbar = FALSE)
consortium_vocab = create_vocabulary(C_it_train)

consortium_vocab <- prune_vocabulary(consortium_vocab, term_count_min = 5)
consortium_vocab
```

```{r, include=FALSE}
SchoolTextDF <- data.frame(text = sapply(school_corpus, as.character), stringsAsFactors = FALSE)

S_it_train = itoken(SchoolTextDF$text, progressbar = FALSE)
school_vocab = create_vocabulary(S_it_train)

school_vocab <- prune_vocabulary(school_vocab, term_count_min = 5)
school_vocab
```

```{r, include=FALSE}
PolicyTextDF <- data.frame(text = sapply(policy_corpus, as.character), stringsAsFactors = FALSE)

P_it_train = itoken(PolicyTextDF$text, progressbar = FALSE)
policy_vocab = create_vocabulary(P_it_train)

policy_vocab <- prune_vocabulary(policy_vocab, term_count_min = 5)
policy_vocab
```

```{r city-visual, echo=FALSE, fig.align = 'center', out.width = "1\\linewidth", fig.cap = "\\label{fig:city-visual}Most common bigrams found in the municipal and regional government documents."}
ggraph(municipal_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "lightblue", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

```{r, include=FALSE}
consortium_bigrams_separated <- consortium_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

consortium_bigram_counts <- consortium_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

consortium_bigram_graph <- consortium_bigram_counts %>%
  filter(n > 5) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
```
 
```{r consortia-visual, echo=FALSE, fig.align = 'center', out.width = "1\\linewidth", fig.cap = "\\label{fig:consortia-visual}Most common bigrams found in the transportation consortia documents."}
ggraph(consortium_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "red", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```
 
```{r, include=FALSE}
school_bigrams_separated <- school_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

school_bigram_counts <- school_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

school_bigram_graph <- school_bigram_counts %>%
  filter(n > 8) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
```

```{r school-visual, echo=FALSE, fig.align = 'center', out.width = "1\\linewidth", fig.cap = "\\label{fig:school-visual}Most common bigrams found in the school board documents."}
ggraph(school_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "orange", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

```{r, include=FALSE}
policy_bigrams_separated <- policy_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

policy_bigram_counts <- policy_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

policy_bigram_graph <- policy_bigram_counts %>%
  filter(n > 10) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
```

```{r policy-visual, echo=FALSE, fig.align = 'center', out.width = "1\\linewidth", fig.cap = "\\label{fig:policy-visual}Most common bigrams found across all policy documents (i.e., school board, municipality, and transportation consortia combined)."}
ggraph(policy_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "purple", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

We then combined all municipality, school board, and transportation consortia documents into one "policy+practice" corpus. This enabled us to examine and visualize the most common bigrams found across all of the material in Ontario that was collected for this study. Figure \ref{fig:policy-visual} shows all of the bigrams that occur more than 10 times in the policy+practice corpus. In addition to the bigrams already identified above, we also found _mental health_, _walk day_, and _green communities_ as common pairs of consecutive words. _Green Communities Canada_ is a non-profit organization that has significantly supported AST initiatives through the Ontario Active School Travel program so the high frequency of this term in the policy+practice corpus is not surprising. Overall, the policy documents from STP stakeholder groups seem to focus on four key areas: i) benefits or impacts of AST; ii) mechanisms of intervention; iii) concerns or barriers; and iv) supports for AST. This interpretation indicates that the general public accessing information about AST in Ontario is informed about a wide range of content related to this issue.

Next, we analyzed bigrams in the academic corpus separately to make comparisons with the policy+practice corpus. Figure \ref{fig:academic-visual} indicates that academic papers include several common bigrams that were also found in the policy documents including _physical activity_ (n = 1566), which is the top bigram, _traffic safety_ (n = 308), and _safe routes_ (n = 268). However, many other factors are identified in the research literature that are not presented to the general public through policy documents. After _physical activity_, _built environment_ (n = 1175), _independent mobility_ (n = 774), and _urban form_ (n = 352) are the most frequent pairs of consecutive words. Academic papers also often discuss _distance home_ (n = 258), _car ownership_ (n = 254), _household income_ (n = 254), and _population density_ (n = 205), which are factors that have been found to influence AST. Many papers also investigate gender differences in AST given that _boys girls_ (n = 211) is another common bigram. Finally, the presence of _statistically significant_ among the top bigrams indicates that researchers often aim to identify associations using statistical measures. We found that the academic corpus focuses on a greater range of topics than found in the policy+practice documents.

```{r, include=FALSE}
academic_bigrams_separated <- academic_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

academic_bigram_counts <- academic_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)

# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outside the range of occurrences 

academic_bigram_graph <- academic_bigram_counts %>%
  filter(n > 200) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))
```

```{r, academic-visual, echo=FALSE, fig.align = 'center', out.width = "1\\linewidth", fig.cap = "\\label{fig:academic-visual}Most common bigrams found in the academic papers."}
ggraph(academic_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "lightgreen", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

We interpreted the most common bigrams from the policy+practice corpus (see Figure \ref{fig:policy-visual}), which includes all documents from municipalities, transportation consortia, and school boards, as the main ideas that STP stakeholder groups focus on and communicate to the public about AST. We then examined the context of these key ideas by extracting words-in-context from the corpora. Table \ref{tab:policy-concordance} presents some examples from select policy documents that illustrate how the most common bigrams are communicated to the public.

```{r policy-concordance, echo=FALSE}
# Import raw policy VCorpus (not cleaned of stop words or punctuation) created by tm package

policy_quanteda <- tm::VCorpus(tm::VectorSource(raw_policy_corpus))
policy_quanteda <- corpus(policy_quanteda)

# Extraction of various search terms and the surrounding sentence context

kwic_pol_physical <- kwic(tokens(policy_quanteda), pattern = "physical", window = 10)
kwic_pol_mental <- kwic(tokens(policy_quanteda), pattern = "mental", window = 10)
kwic_pol_air <- kwic(tokens(policy_quanteda), pattern = "air", window = 10)
kwic_pol_traffic <- kwic(tokens(policy_quanteda), pattern = "traffic", window = 10)
kwic_pol_safety <- kwic(tokens(policy_quanteda), pattern = "safety", window = 10)
kwic_pol_health <- kwic(tokens(policy_quanteda), pattern = "health", window = 10)
kwic_pol_emissions <- kwic(tokens(policy_quanteda), pattern = "emissions", window = 10)
kwic_pol_routes <- kwic(tokens(policy_quanteda), pattern = "routes", window = 10)
kwic_pol_lanes <- kwic(tokens(policy_quanteda), pattern = "lanes", window = 10)
kwic_pol_zone <- kwic(tokens(policy_quanteda), pattern = "zone", window = 10)
kwic_pol_bus <- kwic(tokens(policy_quanteda), pattern = "bus", window = 10)
kwic_pol_comm <- kwic(tokens(policy_quanteda), pattern = "community", window = 10)
kwic_pol_ben <- kwic(tokens(policy_quanteda), pattern = "benefit", window = 10)
kwic_pol_wea <- kwic(tokens(policy_quanteda), pattern = "weather", window = 10)
```

```{r content-table, echo=FALSE}
text_tbl <- data.frame(
  Terms = c("Air Quality", "Benefit", "Walking School Bus", "Community", "Emissions", "Health", "Lanes", "Mental Health", "Physical Health"),
  Stakeholder = c("School Board", "Municipality", "School Board", "School Board", "Consortia", "Municipality", "Municipality", "Municipality", "Municipality"),
  Context = c(
    "Active transportation [...] improves air quality.",
    "Stronger bones and muscles, improved self-esteem and sense of well-being while reducing stress and risk of chronic disease all benefit those who use active transportation.",
    "While taking part in a walking school bus, your child will enjoy seeing friends on the way to school. They will be active more often. This is also a great opportunity for your child to socialize with school friends in a monitored and safe way where they can practice social distancing, modelled by a leader.",
    "Help your students get started on the right foot - encourage them to walk or bike to school when possible. Even leaving the car a block or two and walking the rest of the way helps. It’s good for the environment and your health, and teaches your child independence and community awareness.",
    "An active school commute also reduces congestion in school zones and contributes to reducing greenhouse gas emissions – it’s a win-win for everyone!",
    "Active School Travel allows school-aged children the chance to participate in moderate to intense physical activity. This is linked with lower body mass index and improved cardiovascular health.",
    "We are continuing to build on the cycling and pedestrian network by adding more bike lanes, building multi-use paths and encouraging developments to provide better pedestrian/cycling environments.",
    "Active and Sustainable School Travel (ASST) not only improves physical and mental health but contributes to a healthier environment and safer streets.",
    "Encouraging Active Transportation promotes physical health and recreation, helps manage congestion, reduces emissions and supports municipal objectives for efficient land use.")
)

kbl(text_tbl,
    booktabs = TRUE,
    caption = "\\label{tab:policy-concordance}The context of key terms that were identified as common bigrams.") %>%
  kable_paper(full_width = F) %>%
  kable_styling(latex_options = c("striped")) %>%
  column_spec(1, bold = T) %>%
  column_spec(3, width = "20em")
```

## 5.3. Topic modelling

```{r corpus-dtm, include=FALSE}
# Create DTM from corpus

municipal_dtm <- DocumentTermMatrix(municipal_corpus)
school_dtm <- DocumentTermMatrix(school_corpus)
consortia_dtm <- DocumentTermMatrix(consortium_corpus)
policy_dtm <- DocumentTermMatrix(policy_corpus)
academic_dtm <- DocumentTermMatrix(academic_corpus_repaired)
```

```{r topics-number, include=FALSE}
# Select number of topics for each LDA model using `ldatuning` 

municipal_lda_num <- FindTopicsNumber(
  municipal_dtm, 
  topics = seq(from = 2, to = 15, by = 1),
  metrics = c("Griffiths2004", "CaoJuan2009", "Arun2010", "Deveaud2014"),
  method = "Gibbs",
  #control = list(seed = 77),
  #mc.cores = 2L,
  #verbose = TRUE
)

school_lda_num <- FindTopicsNumber(
  school_dtm, 
  topics = seq(from = 2, to = 15, by = 1),
  metrics = c("Griffiths2004", "CaoJuan2009", "Arun2010", "Deveaud2014"),
  method = "Gibbs",
  #control = list(seed = 77),
  #mc.cores = 2L,
  #verbose = TRUE
)

consortia_lda_num <- FindTopicsNumber(
  consortia_dtm, 
  topics = seq(from = 2, to = 15, by = 1),
  metrics = c("Griffiths2004", "CaoJuan2009", "Arun2010", "Deveaud2014"),
  method = "Gibbs",
  #control = list(seed = 77),
  #mc.cores = 2L,
  #verbose = TRUE
)

policy_lda_num <- FindTopicsNumber(
  policy_dtm,
  topics = seq(from = 2, to = 15, by = 1),
  metrics = c("Griffiths2004", "CaoJuan2009", "Arun2010", "Deveaud2014"),
  method = "Gibbs",
  #control = list(seed = 77),
  #mc.cores = 2L,
  #verbose = TRUE
)
```

```{r topics-academic, include=FALSE, cache=TRUE}
#DO NOT RUN EVERY TIME - takes approximately 20 minutes

academic_lda_num <- FindTopicsNumber(
  academic_dtm, 
  topics = seq(from = 2, to = 25, by = 1),
  metrics = c("Griffiths2004", "CaoJuan2009", "Arun2010", "Deveaud2014"),
  method = "Gibbs")
  #control = list(seed = 77),
  #mc.cores = 2L,
  #verbose = TRUE)
```

```{r evaluate-lda, include=FALSE}

FindTopicsNumber_plot(municipal_lda_num)
FindTopicsNumber_plot(school_lda_num)
FindTopicsNumber_plot(consortia_lda_num)
FindTopicsNumber_plot(policy_lda_num)
FindTopicsNumber_plot(academic_lda_num)

# The graphs suggest that there are 7-10 topics for the municipal corpora
# The graphs suggest that there are 7-10 topics for the school corpora
# The graphs suggest that there are 8-10 topics for the consortia corpora
# The graphs suggest that there are 9-13 topics for the policy corpora
# The graphs suggest that there are 17-21 topics for the academic corpora
```

```{r corpus-lda-model, cache = TRUE, include=FALSE}
municipal_lda <- LDA(municipal_dtm, k = 4, method = "Gibbs", control = NULL, model = NULL)

school_lda <- LDA(school_dtm, k = 4, method = "Gibbs", control = NULL, model = NULL)

consortia_lda <- LDA(consortia_dtm, k = 4, method = "Gibbs", control = NULL, model = NULL)

policy_lda <- LDA(policy_dtm, k = 9, method = "Gibbs", control = NULL, model = NULL)

academic_lda <- LDA(academic_dtm, k = 11, method = "Gibbs", control = NULL, model = NULL)
```

```{r municipal-topics, include=FALSE}
municipal_topics <- tidy(municipal_lda, matrix = "beta")
school_topics <- tidy(school_lda, matrix = "beta")
consortia_topics <- tidy(consortia_lda, matrix = "beta")
policy_topics <- tidy(policy_lda, matrix = "beta")
academic_topics <- tidy(academic_lda, matrix = "beta")
```

```{r municipal-terms, include=FALSE}
municipal_top_terms <- municipal_topics %>%
  group_by(topic) %>%
  slice_max(beta, n = 10) %>% 
  ungroup() %>%
  arrange(topic, -beta)

municipal_top_terms %>%
  mutate(term = reorder_within(term, beta, topic)) %>%
  ggplot(aes(beta, term, fill = factor(topic))) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ topic, scales = "free") +
  scale_y_reordered()
```

```{r school-terms, include=FALSE}
school_top_terms <- school_topics %>%
  group_by(topic) %>%
  slice_max(beta, n = 10) %>% 
  ungroup() %>%
  arrange(topic, -beta)

school_top_terms %>%
  mutate(term = reorder_within(term, beta, topic)) %>%
  ggplot(aes(beta, term, fill = factor(topic))) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ topic, scales = "free") +
  scale_y_reordered()
```

```{r consortia-terms, include=FALSE}
consortia_top_terms <- consortia_topics %>%
  group_by(topic) %>%
  slice_max(beta, n = 10) %>% 
  ungroup() %>%
  arrange(topic, -beta)

consortia_top_terms %>%
  mutate(term = reorder_within(term, beta, topic)) %>%
  ggplot(aes(beta, term, fill = factor(topic))) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ topic, scales = "free") +
  scale_y_reordered()
```

```{r policy-terms, echo=FALSE, out.width="1\\linewidth", fig.cap="\\label{fig:policy-terms}Topics identified in the policy+practice corpus according to clusters of words. The per-word-per-topic probabilities are shown by beta."}
policy_top_terms <- policy_topics %>%
  group_by(topic) %>%
  slice_max(beta, n = 10) %>% 
  ungroup() %>%
  arrange(topic, -beta)

policy_top_terms %>%
  mutate(term = reorder_within(term, beta, topic)) %>%
  ggplot(aes(beta, term, fill = factor(topic))) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ topic, scales = "free") +
  scale_y_reordered()
```

```{r academic-terms, echo=FALSE, out.width="1\\linewidth", cache=TRUE, fig.cap="\\label{fig:academic-terms}Topics identified in the academic corpus according to clusters of words. The per-word-per-topic probabilities are shown by beta."}

academic_top_terms <- academic_topics %>%
  group_by(topic) %>%
  slice_max(beta, n = 10) %>% 
  ungroup() %>%
  arrange(topic, -beta)

academic_top_terms %>%
  mutate(term = reorder_within(term, beta, topic)) %>%
  ggplot(aes(beta, term, fill = factor(topic))) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ topic, scales = "free") +
  scale_y_reordered()
```

For the final part of our analysis, we conducted topic modelling to examine the different topics found in the policy and academic corpora. We focused on the policy/practice corpus, instead of assessing the municipal, school, and consortia documents separately, so that we could report on the various frames used across all documents put out by STP stakeholder groups in Ontario. We then estimated Latent Dirichlet Allocation (LDA) models for each corpus. Parameter tuning suggests that the policy+practice corpus has between 9 and 13 topics and the academic corpus has between 17 and 25 topics. After running the LDA model for the academic corpus, we realized the difficulty of interpreting a minimum of 17 topics based on the clusters of words that were identified. We experimented with the model by adjusting the number of topics and evaluating the output of terms in each topic. We found that there were 9 distinct topics that could be interpreted in the policy corpus and 11 topics in the academic corpus, after which there was too much overlap for the clusters to be meaningfully interpreted. Figures \ref{fig:policy-terms} and \ref{fig:academic-terms} present the main terms that are associated with the topics found in each corpus. 

In the policy+practice corpus, we identified the following topics based on the cluster of words: (1) safety; (2) weather and busing; (3) active travel planning; (4) walking; (5) resources for walking; (6) bicycling; (7) active travel concerns; (8) benefits of active travel; and (9) busing logistics. These topics indicate that STP stakeholder groups are sending the message that walking and bicycling to school are healthy travel modes for students, particularly in terms of physical activity. We also found that information is shared to support parents and students in using active modes to school, for example regarding the availability of bicycling lanes and tips for route choice for walking. 

The academic corpus has a higher number of topics likely due to the volume of papers included. The following topics were identified based on the clusters of words: (1) physical activity; (2) safe routes to school for active travel; (3) behaviours and attitudes; (4) bicycling; (5) walking; (6) built environment; (7) trip choice; (8) active school travel interventions; (9) parents; (10) children's independent mobility; and (11) public health and policies. This corpus reflects a broader range of topics than the policy/practice corpus.

## 5.4. Frames

Based on the identified  bigrams and topics, we determined that the policy+practice corpus primarily frames AST as a health and environmental issue. STP stakeholder groups appear to position walking, bicycling, or rolling to school as beneficial to individual health, via physical activity and improved mental health, and to the broader community through a reduction in traffic and vehicle emissions. Here, we present some examples from the policy documents that illustrate how the health and environmental frame is communicated:

> _If you live in a walk zone, the best way to get to school is by walking or biking. This promotes physical activity, helps the environment and minimizes traffic around schools during busy times._ (City of Barrie)

> _Active school travel is a great way for children to be physically active, which is associated with improved physical and mental health, while making school zones safer, by reducing traffic volumes at and around schools._(Region of Leeds, Grenville and Lanark)

> _The WCDSB supports active transportation as the preferred method of transportation to school because it is a healthy choice that has proven links to greater student achievement._ (Waterloo Catholic District School Board)

Furthermore, we found that policy documents make claims about the benefits of AST that are consistent with the findings of academic research and evaluation. 

> _For their health, safety, environment and community: Kids learn healthy habits and concentrate better in class; One less car (yours) reduces traffic and parking problems in school zones; Teach your kids about traffic safety; Start a walking school bus; your kids make friends in every grade, and that can prevent bullying._ (City of Guelph)

> _There are lots of benefits in the classroom for children that walk or cycle to school on a regular basis. Some of these benefits include improved concentration and better coping with stress. Being outside helps to prevent feelings of isolation and increases their social interactions. Walking and biking to school can also save you money and lead to fewer cars on the road._ (City of Ottawa)

The secondary frame in policy documents is that AST is accessible and feasible for children and parents. Despite the emphasis on the logistics of busing in the topic modelling, the documents indicate that there is an opportunity for or prospect of behaviour change. Some cities and schools explain how children and parents can leave the car at home and make the journey to school on foot or by bike. This frame encourages the public to evaluate their own travel decisions and to access resources (e.g., walking skills checklist) that will help them make AST a first choice. Examples of this secondary frame include:

> _A way to make sure your child is safe while walking to school is with a 'walking school bus.' Here are some tips for a walking school bus: Invite families who live nearby to walk; Pick a route and take a test walk; Take side streets and paths that are less busy with traffic; Decide how often the group will walk together; Talk with your boss to adjust your day; Have fun!_ (City of Ottawa)

> _Help your students get started on the right foot - encourage them to walk or bike to school when possible.  Even leaving the car a block or two and walking the rest of the way helps. It’s good for the environment and your health, and teaches your child independence and community awareness._ (Halton District School Board)

> _Want to boost your child’s mental and physical health? Ottawa Public Health, City of Ottawa, and OSTA have produced a tipsheet for parents about “active transportation” to school – fitting walking and wheeling into your daily routine._ (Ottawa-Carleton District School Board)

Finally, both AST frames present solutions to encourage AST. STP stakeholder groups seem to be communicating that AST is a healthy and easy option as a result of policy changes (e.g., available resources for parents and children) and improvements to the built environment. This could include examples of various efforts that are underway to support AST including route planning.

> _School Travel Planning is a community-based approach that aims to increase the number of students and adults choosing active and sustainable travel to get to and from school. This approach addresses concerns about safety, physical activity, and the environment._ (City of Hamilton)

> _Today, as more and more of our neighbourhoods are being retrofitted with new sidewalks and bike lanes, pedestrian crossovers, street lights, reduced speed limits and/or crossing guards, the walk or bike ride to and from school has never been easier, safer or healthier._  (Hamilton-Wentworth District Catholic School Board)

6. Discussion
===============

## 6.1. Current AST frames in Ontario

Using natural language processing techniques, we analyzed how AST is framed in 69 documents available to the public on the websites of STP stakeholder groups in Ontario. Two main frames in the policy+practice corpus were identified based on the most common bigrams and topics from the LDA model. 

We found that AST is primarily framed to parents as beneficial to the health and wellbeing of children and to environmental sustainability. The policy documents reflect the evidence that AST contributes positively to children's physical health [see @faulknerActiveSchoolTransport2009; @schoeppeAssociationsChildrenActive2015], although the statements regarding the benefits of AST to children's school performance are less well-supported in the extant literature [@westmanTravelChildWellbeing2020]. STP stakeholder groups also communicate that increasing AST may reduce traffic near and around schools. This is conveyed presumably to alleviate parental concerns about traffic and safety [@eversParentSafetyPerceptions2014; @mammenUnderstandingDriveEscort2012; @rothmanAssociationsParentsPerception2015; @wilsonUnderstandingChildParent2018] or to reduce the frequency of risky behaviours from drivers around schools [@rothmanSchoolEnvironmentStudent2017]. 

In the secondary frame, AST is presented as an accessible and feasible way for children to travel to and from school. Children and parents are encouraged to adopt new travel behaviours. STP stakeholder groups identified different ways that parents could encourage or support their children to commute to school by using active modes. Some school boards and municipalities also shared resources such as walking tip sheets and guidance for starting a walking school bus. Other advice included dropping children off one or two blocks away from school so that they could walk or bike part of the trip. The general emphasis of this frame is communicating information that could change parental perceptions about the ease of their children using active modes to school, which may be seen by STP stakeholder groups as a "modifiable" factor [see @riaziCorrelatesChildrenIndependent2019]. In turn, this could encourage parents to modify their routines and incorporate opportunities for their children to use active modes to school.

Both frames present the AST issue in a positive light. Neither frame appears to explain why declining rates of AST are a problem or convey any urgency to this issue so that it attracts the attention of parents, the general public, or policy makers. Communicating the potential outcomes of increased AST may be persuasive arguments to motivate behaviour change, but these frames do not seem to encourage parents or the general public to view their current behaviour as problematic or unhealthy for their children's development and their community. Thus, behaviour change is presented as an option for some but not an imperative for all. For example, parents who drive their children to school have reported concerns about traffic volume around schools [@mammenUnderstandingDriveEscort2012], but may not recognize that their own behaviour contributes to the problem that is perceived to prevent their child from safely walking or bicycling to school [@collinsSafeJourneysEnterprising2001]. Reynard et al. [-@reynardGrowthResilienceHow2021] similarly found in their analysis of Canadian municipal documents that one of the dominant frames presented the adoption of behaviours to help mitigate the climate crisis as a choice but not "the expected norm".

We found that the proposed solutions in the secondary frame to increase AST align with different levels of the socioecological model: 1) behaviour change from individuals or households making different travel decisions; 2) policies like STP that create resources for AST; and 3) engineering solutions like bicycle lanes. This reflects findings from the AST literature that a range of solutions are needed to address different factors that influence AST [_inter alia, see_ @mitraIndependentMobilityMode2013; @panterAttitudesSocialSupport2010]. The recognition of engineering changes may reflect the strong engagement of the "policy stream" [@kingdonAgendasAlternativesPublic1984] since engineering staff and municipal representatives are common STP stakeholders in Canada [@buttazzoniSupportingActiveSchool2018; @mammenPuttingSchoolTravel2015], as well as the evidence that the built environment influences mode choice to school. However, it is beyond the scope of this paper to assess whether the proposed solutions are perceived to be sufficient by parents for increasing AST.

## 6.2. Implications for school travel planning

STP stakeholders should problematize the significant decline in AST that has occurred over recent decades in Canada and emphasize that this issue merits urgent behaviour change. A study investigating the influence of different valence framings of CO2 emissions on transport mode shift found that positive framing can be less effective than negative framing [@waygoodCO2ValenceFraming2018]. A negative framing that challenges the social norm of driving could be more motivational to shift modes, which would be consistent with other findings [see @waygoodCO2ValenceFraming2018]. Policy documents should make it clear that continued use of nonactive modes to school can deprive children of opportunities to increase physical activity and to gain health and social benefits. 

There is a noticeable lack of focus on certain household determinants of AST in the two frames that needs to be addressed. For example, the role of convenience and inclement weather in shaping household travel decisions [@buliungSchoolTravelPlanning2011] and the complexity of travel arrangements that must be coordinated by households [see @buliungLivingJourneySchool2021] were not found to be discussed. The desire to escort children to school, which has been noted by parents as a reason to continue driving [@westmanWhatDrivesThem2017], is also not adequately addressed by STP stakeholders. Parental assessment of a child's ability to undertake the journey to school was likewise overlooked despite its role in decision making for mode choice to school [@faulknerWhatQuickestEasiest2010]. Framing AST as a developmental opportunity or a rite of passage that children have been denied could challenge the prevailing culture of risk avoidance which discourages parents from letting their children use active modes to school. 

Future research and evaluation by STP stakeholders should investigate how parents or the general public respond to messages or information that encourages the adoption of AST and evaluate which are most effective. It would be helpful to understand which frames would most encourage behaviour change or increase political support for interventions that address barriers to AST. This type of information could ensure that educational strategies and promotional materials increase buy-in for their target audience. If Canadian STP stakeholders wish to involve more local residents in their efforts [@buttazzoniSupportingActiveSchool2018], it would also be worthwhile for them to produce different materials that communicate why this issue is important to the general public, regardless of whether they currently have children commuting to/from school.

## 6.3. Limitations

A limitation of this study is that we only analyzed English-language texts that were easily accessible to the general public on the websites of STP stakeholders in Ontario. We did not include French-language materials from Ontario's 12 French school boards (a mixture of public and Catholic schools). Parents likely receive information about AST directly from schools, which may contain more content that reflects the local barriers to AST, but these materials were not used in our analysis.

7. Conclusion
===============

We used natural language processing techniques to examine how different school travel planning (STP) stakeholders in Ontario frame the issue of AST. STP stakeholders frame AST as an accessible and feasible way to travel to school that is valuable to children's health and to the environment. STP stakeholders are communicating that this issue can be addressed through household behaviour change and policy solutions. Policy documents reveal that STP stakeholders are focusing on "modifiable factors" such as parental perceptions or micro-scale elements in the built environment to increase rates of AST. However, AST may not be framed sufficiently as a "problem" that requires urgent intervention, which may impact how parents respond to behaviour change initiatives and limit awareness in the general public. In their public materials about AST, STP stakeholders should emphasize why AST rates should increase in local communities and how the negative effects of nonactive modes to school may impact children's health and wellbeing.

Acknowledgments
===================

This research was completed using open software, and the authors wish to acknowledge the developers of the following `R` packages: `dplyr` [@R-dplyr], `ggraph` [@R-ggraph], `ggplot2` [@R-ggplot2], `igraph` [@R-igraph], `pdftools` [@R-pdftools], `readr` [@R-readr], `reshape2` [@R-reshape2], `stringr` [@R-stringr], `text2vec` [@R-text2vec], `textdata` [@R-textdata], `tidyr` [@R-tidyr], `tidytext` [@R-tidytext], `tm` [@R-tm], `tools` [@R-tools], `topicmodels` [@R-topicmodels], `widyr` [@R-widyr], `word2vec` [@R-word2vec], `wordcloud` [@R-wordcloud], `DiagrammeR` [@R-diagrammeR], and `kableextra` [@R-kableextra].

References
===============
