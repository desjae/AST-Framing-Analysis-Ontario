---
title: How do school travel planning stakeholders frame active school travel in Ontario, Canada?
author:
  - name: Author 1
    email: author1@example.com
    affiliation: Some Department
    footnote: 1
  - name: Author 2
    email: author2@example.com
    affiliation: Some Department
  - name: Author 3
    email: author3@example.com
    affiliation: Another University
    footnote: 2
  - name: Author 4
    email: author4@example.com
    affiliation: Some Institute
    footnote: 2
  - name: Author 5
    email: author5@example.com
    affiliation: Some University
  - name: Author 6
    email: author6@example.com
    affiliation: Some Department
address:
  - code: Some Department
    address: Department, Street, City, Province, Postal Code
  - code: Another University
    address: Department, Street, City, Province, Postal Code
  - code: Some Institute
    address: Street, City, Province, Postal Code
  - code: Some University
    address: Department, Street, City, Province, Postal Code
footnote:
  - code: 1
    text: "Corresponding Author"
  - code: 2
    text: "Equal contribution"
abstract: |
  This is the abstract.

  It consists of two paragraphs.

journal: "Journal of Transport & Health"
date: "`r Sys.Date()`"
bibliography: mybibfile.bib
linenumbers: false
#numbersections: true
csl: elsevier-harvard.csl
output: rticles::elsevier_article
---

```{r load-packages, include=FALSE}
library(DiagrammeR)
library(dplyr)
library(ggraph)
library(ggplot2)
library(igraph)
library(kableExtra)
library(pdftools)
library(readr)
library(reshape2)
library(stringr)
library(text2vec)
library(textdata)
library(tidyr)
library(tidytext)
library(tm) 
library(tools)
library(topicmodels)
library(widyr)
library(word2vec)
library(wordcloud)
```

```{r load-data, include=FALSE}
load(file= "Corpus .rda/academic_corpus.rda")
load(file= "Corpus .rda/municipal_corpus.rda")
load(file= "Corpus .rda/consortium_corpus.rda")
load(file= "Corpus .rda/school_corpus.rda")
load(file= "Corpus .rda/policy_corpus.rda")
```

```{r package-bib, include=FALSE}
# This function is used to write a bibliography for the `R` packages used in the paper
knitr::write_bib(file = 'packages.bib')
```

  ***Background***:  
  ***Methods***:  
  ***Results***: 
  ***Conclusions***:   
  
\newpage

1. Introduction
===============

## 1.1. School travel planning in Canada

Walking and bicycling to school, commonly known as active school travel or active school transportation (AST), has been declining in Canada and North America for decades [@rothmanDeclineActiveSchool2018], with levels much lower than other developed countries like The Netherlands [@vangoeverdenSchoolTravelBehaviour2013] and Japan [@waygoodChapterSixteenJapan2020]. This trend has prompted a multi-sector response to identify strategies to increase AST, the most popular of which is a growing interest in school travel planning across Canada.

School travel planning (STP) is a "school-specific" intervention led by a facilitator that brings together a committee of stakeholders from diverse sectors including education, planning, transportation, and public health [@mammenSchoolTravelPlanning2014]. Parents and parent councils also typically have a role in supporting or implementing STP. The intervention encourages participation from the broader community and collaboration between involved stakeholders, who contribute their expertise to remove "school-specific" barriers to AST and to identify strategies for promoting and encouraging AST. STP may also involve other stakeholders including local advocacy groups or environmental organizations who are familiar with the state of AST at the community-level. Buliung et al. [-@buliungSchoolTravelPlanning2011] piloted an STP intervention at 12 schools in 4 Canadian provinces and reported that it increased AST rates and led to a "mobilization of diverse community resources". Since this seminal study, STP interventions have become increasingly popular and common at schools across Canada and have even attracted funding from provincial governments. 

## 1.2. Correlates of active school travel

Factors that influence AST are typically conceptualized according to the socioecological model whereby children's travel behaviour is understood within the context of their household, social, and built environments [see @mitraIndependentMobilityMode2013]. At the individual level, older child age is often associated with AST [@mammenUnderstandingDriveEscort2012; @starkExploringIndependentActive2018; @wilsonUnderstandingChildParent2018]. There is some evidence that gender is a determinant of AST [@babbChildrenActiveTravel2017; @larsenInfluencePhysicalEnvironment2009], although this is not a strong or consistent finding [@rothmanDeclineActiveSchool2018; @schoeppeAssociationsChildrenActive2015]. Distance between home and school is associated with AST [@ikedaAssociationsChildrenActive2018; @mammenUnderstandingDriveEscort2012; @pontEnvironmentalCorrelatesChildren2009; @rothmanDeclineActiveSchool2018] with less AST reported among children who have to travel farther to school. Car ownership is an important household-level influence on AST [@pontEnvironmentalCorrelatesChildren2009; @rothmanDeclineActiveSchool2018; @wilsonUnderstandingChildParent2018], as is household income [@pontEnvironmentalCorrelatesChildren2009]. Parental perceptions of the environment [@demeesterParentalPerceivedNeighborhood2014; @panterAttitudesSocialSupport2010] and children's skills [@ghekiereInsightsChildrenIndependent2017] also influence whether they allow their children to walk or cycle to school. Finally, many studies have found that the quality of the built environment [@ikedaAssociationsChildrenActive2018; @kimBuiltNaturalEnvironmental2020] and active travel infrastructure [@pontEnvironmentalCorrelatesChildren2009] facilitate AST. Concerns about traffic and strangers have been reported by parents who drive their children to school [@mammenUnderstandingDriveEscort2012]. The consensus is that all of these factors are interrelated and that interventions ought to target multiple factors in order to increase walking and bicycling levels to school. 

## 1.3. Correlates of children's independent mobility

AST is one of the most common opportunities for children to travel without adult supervision on a regular basis. Children's independent mobility (CIM) was first described by Hillman et al. [-@hillmanOneFalseMove1990] as the freedom of children to travel and play within their neighborhood and city without the presence of adults. The ability of children to reach destinations such as school or local parks by walking or bicycling on their own as a growing area of research that is related to the body of literature on AST. Similar to AST, CIM is much less common now than it was for previous generations [@bhosaleIntergenerationalChangeChildren2017], and is influenced by many similar personal and environmental factors as AST [@marziChildrenIndependentMobility2018; @mitraIndependentMobilityMode2013]. In a study conducted in multiple Canadian cities, Riazi et al. [-@riaziCorrelatesChildrenIndependent2019] found that a range of factors such as child grade, car ownership, and parental perceptions of safety and environment were associated with CIM. In addition to independent trips to school, children also travel by walking or bicycling on their own to other non-school destinations such as outdoor spaces (i.e., parks, playgrounds), the homes of family members or friends, shopping places, and libraries, to name a few [@badlandAssessingNeighbourhoodDestination2015; @villanuevaWhereChildrenTravel2013a].

## 1.4. Benefits of AST and CIM

The desire to increase AST is warranted - there is strong evidence that children who walk and bicycle to school accrue physical and mental health benefits. Many studies and reviews have focused on the association between AST or CIM and physical activity [e.g., @faulknerActiveSchoolTransport2009; @mitraChildrenActivitytransportationLifestyles2017; @schoeppeAssociationsChildrenActive2015], with findings consistently demonstrating that children who travel by walking or bicycling to school are more active than their peers who do not use active travel. More recently, researchers have been exploring the link between transport and children's wellbeing [@babbChildrenActiveTravel2017; @waygoodTransportChildrenWellbeing2020], which has relevant applications to the study of school travel and satisfaction [see @vandenbergFactorsAffectingParental2020]. CIM is also important for different domains of children's health and wellbeing [@riaziChildrenIndependentMobility2018]. It offers benefits such as increasing traffic and safety skills, boosting spatial awareness when navigating public spaces, and providing more opportunity for social interaction with peers [@schoeppeAssociationsChildrenIndependent2014].

## 1.5. Encouraging adoption of active school travel

In the case of AST and CIM in Canada, Riazi et al. [-@riaziCorrelatesChildrenIndependent2019] state: "it will be vital for interventions to target modifiable factors, including children's and parents' perceptions of their social environment." Parents play the important role of "gatekeeper" by either granting or restricting CIM licenses, meaning whether children can travel alone [@sharminAssociationBuiltEnvironment2017]. For this reason, stakeholders involved in STP produce information targeted for both children and parents, and aim to involve the broader community in their efforts to increase the number of children walking and bicycling to school..

However, the ways in which interventions like STP are framed to their target audience can ultimately influence how they are received and whether they result in behaviour change. The correlates of AST are important knowledge for policymakers because they identify points of intervention and potential benefits that ought to be communicated to the public encourage adoption of AST and to build support for new planning paradigms. What is less clear is how CIM plays into the consideration of policymakers when they act on the objective of increasing AST. 

Any goals for AST, and also CIM, ought to be clearly articulated and reflected in transportation plans and policies to guide initiatives. Presently, however, there has been no study to date that explores how Canadian municipalities and schools frame and discuss AST with the public. Content analysis is one method to analyze how particular issues are framed to groups of people, for instance parents or educators who might be inclined to support AST. It attempts to understand how information presented from a "communicator" leads the "receiver" to a desired response [@reynardGrowthResilienceHow2021]. In a recent paper [@reynardGrowthResilienceHow2021], framing analysis was applied to review municipal policies addressing climate change in four western Canadian cities. Natural language processing (NLP) was used for a similar purpose to examine content in general plans from Californian cities [@brinkleyWhatPlanUsing2021]. The way policy issues are framed is important to understand because it plays a role in either altering or preserving the existing social perceptions. 

## 1.6. Study aim

The aim of this paper is to analyze how AST is framed by STP stakeholders in Ontario, Canada. We used topic modelling and content analysis to examine how the benefits and barriers of AST are presented and which solutions for improving AST are identified in local policy documents from Ontario municipalities and school boards. We compared these documents to a selection of studies on AST and CIM to explore the extent to which research findings have trickled down to inform policy and planning for AST interventions.

2. Data
===============

## 2.1. Data retrieval

### 2.1.1. Policy documents

To determine which stakeholder groups are typically involved in AST and/or STP initiatives in Ontario, we first conducted a preliminary scan of current and past projects funded by the _Ontario Active School Travel_. We found that projects are often led in collaboration by a school board, the respective municipality or region (i.e., transportation planners, public health professionals, engineers, etc.), and the regional transportation consortia. Non-profit organizations, police services, and advocacy groups are other stakeholders who may play a role in supporting AST and/or STP. 

We then assembled a collection of publicly available documents that were sourced online from the main stakeholder groups: i) English school boards; ii) municipal government; and iii) transportation consortia. The search was guided first by a list of all English school boards across Ontario. The websites of each school board were searched for pages related to transportation or school travel. These pages were manually downloaded. Next, we collected documents by searching municipal government and transportation consortia websites. The latter were identified based on geographic area (i.e., the municipalities and/or transportation consortia who are in the same geographic area of each school board). Pages related to active transportation or school travel were manually downloaded. Webpages were included in the corpus if they were easy to find. This primary criteria was important since our analysis pertains to how such issues are framed to the public. Thus, these pages ought to be easy to find, which we defined as requiring no more than 2-4 separate links from the initial Google search.

The initial policy corpus included 64 relevant policy documents (i.e., one webpage or more) from all main stakeholder groups. It is important to note that school boards, municipalities, and transportation consortia may or may not publish information about their involvement in AST and STP efforts on their respective websites or in policy documents. Search results are summarized in Table \ref{tab:search-results}.

```{r policy-documents, echo=FALSE}
data_tbl <- data.frame(
  Stakeholder = c("English school boards", "Municipalities or regions", "Transportation consortia"),
  Total = c("62", "62", "39"),
  Included = c("31", "25", "8")
)

kable(data_tbl,
      "latex",
      booktabs = TRUE,
      caption = "\\label{tab:search-results}Search results from the main STP stakeholder groups.") %>%
  kable_paper(full_width = F) %>%
  column_spec(1, bold = T, border_right = T) %>%
  column_spec(2, width = "30em") %>%
  column_spec(3, border_left = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))
```

### 2.2.1. Academic papers

## 2.2. Data cleaning

A multi-step process was conducted to ensure that the analysis captured as much  content as possible from both the policy documents (n = 64) and academic papers (n = 233). We manually removed any extraneous material in the documents that did not pertain to AST specifically. This included footnotes, references, acknowledgments, and conflict of interest statements in the academic papers. We removed all phone numbers, inserted links to other webpages, personal names, and content not to specific to AST from the policy documents that were retrieved from the websites of school boards, municipalities, and transportation consortia.

To begin, the webpages, which were manually downloaded in portable document format (PDF), were trimmed so that pages that only consisted of tables, figures, or references were removed. Many academic papers were in a two-column format, which is not ideal for conversion to `txt`. We adapted a procedure (https://stackoverflow.com/questions/42541849/extract-text-from-two-column-pdf-with-r) to read the two-column PDF documents so that they would be converted correctly. Four academic papers did not join sufficiently and were taken out of the corpus due to the substantial time required to manually correct their inconsistencies.

We then converted the trimmed PDF documents into `txt` files so that they could be imported in `R` for topic modelling. We proceeded to a manual cleaning phase where we removed any remaining tables, figures, references, headers/footings, and captions that could not be trimmed. Manual corrections were also required for certain pages in academic papers that remained in two-column format after the conversion process. This typically occured on pages that had a table or figure which disrupted the text. Finally, we reviewed all of the documents to remove hyphenation by line breaks and to keep hyphenated words together on the same line. Any ligatures (e.g., combinations of characters or letters that were not properly detected during the conversion process) were fixed by inserting the unicode sequence of character to replace the missing sequence of characters.

At this point, the documents were imported into the corpus in `R` and added to a data frame for analysis. In the final step before analysis, we removed all blank spaces, punctuation, capitalization, and numbers. English stop words, which are common words such as _and_ or _the_ as identified in a predetermined list by Lewis et al. [@R-tm] and other frequent terms in the documents like places were removed from the corpus.  

3. Methods
===============

## 3.1. Case study: Ontario, Canada

In 2017, the provincial government of Ontario issued funding to Green Communities Canada (GCC), a non-profit organization, to launch the _Ontario Active School Travel_ (OAST) program. The program provides funding for school and community-based initiatives and supports stakeholders in municipalities across the province to implement STP and other interventions aimed at increasing AST. As of 2021, OAST has funded _X_ projects in Ontario. GCC continues its work by providing resources for interested stakeholders and funding projects across Ontario led by collaborative groups involving school boards, municipal or regional governments, and regional transportation consortia. The latter are dedicated transportation bodies that deliver efficient and effective transportation services, which generally focuses on providing the school busing service to families in their associated region.

## 3.2. Topic modelling

## 3.3. Summative content analysis

## 3.4. Reproducibility

This paper is an example of open and reproducible research that uses only open software. All data were obtained from publicly available sources and organized in the form of a data package. Following best practices in spatial data science [@brunsdon2020opening], the code and data needed to reproduce or conduct a similar analysis for other regions in North America or elsewhere are available for download.

4. Results
===============

```{r city-bigrams, echo=FALSE}
# Converting corpus to tidytext data type 
td_municipal_corpus <- tidy(municipal_corpus)

# n can be changed 
municipal_bigrams <- td_municipal_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

municipal_trigrams <- td_municipal_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_municipal_bigrams <- municipal_bigrams %>%
  count(bigram, sort = TRUE)

top_municipal_trigrams <- municipal_trigrams %>% 
  count(trigram, sort = TRUE)

top_municipal_bigrams
top_municipal_trigrams
```

```{r consortia-bigrams, echo=FALSE}

# Converting corpus to tidytext data type 
td_consortium_corpus <- tidy(consortium_corpus)

# n can be changed 
consortium_bigrams <- td_consortium_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

consortium_trigrams <- td_consortium_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_consortium_bigrams <- consortium_bigrams %>%
  count(bigram, sort = TRUE)

top_consortium_trigrams <- consortium_trigrams %>% 
  count(trigram, sort = TRUE)

top_consortium_bigrams
top_consortium_trigrams
```

```{r school-bigrams, echo=FALSE}

# Converting corpus to tidytext data type 
td_school_corpus <- tidy(school_corpus)

# n can be changed 
school_bigrams <- td_school_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

school_trigrams <- td_school_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_school_bigrams <- school_bigrams %>%
  count(bigram, sort = TRUE)

top_school_trigrams <- school_trigrams %>% 
  count(trigram, sort = TRUE)

top_school_bigrams
top_school_trigrams
```

```{r policy-bigrams, echo=FALSE}

# Converting corpus to tidytext data type 
td_policy_corpus <- tidy(policy_corpus)

# n can be changed 
policy_bigrams <- td_policy_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

policy_trigrams <- td_policy_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_policy_bigrams <- policy_bigrams %>%
  count(bigram, sort = TRUE)

top_policy_trigrams <- policy_trigrams %>% 
  count(trigram, sort = TRUE)

top_policy_bigrams
top_policy_trigrams
```

```{r academic-bigrams, echo=FALSE}

# Converting corpus to tidytext data type 
td_academic_corpus <- tidy(academic_corpus)

# n can be changed 
academic_bigrams <- td_academic_corpus %>%
  unnest_tokens(bigram, text, token = "ngrams", n = 2)

academic_trigrams <- td_academic_corpus %>%
  unnest_tokens(trigram, text, token = "ngrams", n = 3)

# Bigrams and trigrams that are most common 
top_academic_bigrams <- academic_bigrams %>%
  count(bigram, sort = TRUE)

top_academic_trigrams <- academic_trigrams %>% 
  count(trigram, sort = TRUE)

top_academic_bigrams
top_academic_trigrams
```

```{r city-visual, echo=FALSE}
municipal_bigrams_separated <- municipal_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

municipal_bigram_counts <- municipal_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

municipal_bigram_graph <- municipal_bigram_counts %>%
  filter(n > 8) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))

ggraph(municipal_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "lightblue", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

```{r consortia-visual, echo=FALSE}
consortium_bigrams_separated <- consortium_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

consortium_bigram_counts <- consortium_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

consortium_bigram_graph <- consortium_bigram_counts %>%
  filter(n > 5) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))

ggraph(consortium_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "red", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```
 
```{r school-visual, echo=FALSE}
school_bigrams_separated <- school_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

school_bigram_counts <- school_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

school_bigram_graph <- school_bigram_counts %>%
  filter(n > 8) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))

ggraph(school_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "orange", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

```{r policy-visual, echo=FALSE}
policy_bigrams_separated <- policy_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

policy_bigram_counts <- policy_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)


# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outide the range of occurrences 

policy_bigram_graph <- policy_bigram_counts %>%
  filter(n > 10) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))

ggraph(policy_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "purple", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()
```

```{r academic-visual, echo=FALSE}
academic_bigrams_separated <- academic_bigrams %>%
  separate(bigram, c("word1", "word2"), sep = " ")

academic_bigram_counts <- academic_bigrams_separated %>% 
  count(word1, word2, sort = TRUE)

# Adjust the parameter below to filter out based on number of occurrence

# Error will occur if n is outside the range of occurrences 

academic_bigram_graph <- academic_bigram_counts %>%
  filter(n > 150) %>%
  graph_from_data_frame()

set.seed(2021)

a <- grid::arrow(type = "closed", length = unit(.15, "inches"))

ggraph(academic_bigram_graph, layout = "fr") +
  geom_edge_link(aes(edge_alpha = n), show.legend = FALSE,
                 arrow = a, end_cap = circle(.07, 'inches')) +
  geom_node_point(color = "lightgreen", size = 4) +
  geom_node_text(aes(label = name), repel = TRUE) + 
  theme_void()

```

```{r academic-term-frequency, echo=FALSE}
# Create new data frame with the cleaned corpus 
AcademicTextDF <- data.frame(text = sapply(academic_corpus, as.character), stringsAsFactors = FALSE)

it_train = itoken(AcademicTextDF$text, progressbar = FALSE)
academic_vocab = create_vocabulary(it_train)

# Cut out terms that have a minimum count of 5 
academic_vocab <- prune_vocabulary(academic_vocab, term_count_min = 5)
academic_vocab
```

## 4.1. Word Frequency

## 4.2. Bigrams and Correlations

## 4.3. Policy content


5. Discussion
===============

## 5.1. Framing of AST in policy documents

## 5.2. Framing of AST in academic papers

## 5.3. Implications for School Travel Planning

School boards and educators are an influential contributor to AST and STP efforts in Canada.

## 5.4. Limitations

6.1. Conclusion
===============

## 6.1. Future research

Acknowledgments
===================

This research was completed using open software, and the authors wish to acknowledge the developers of the following `R` packages: `dplyr` [@R-dplyr], `ggraph` [@R-ggraph], `ggplot2` [@R-ggplot2], `igraph` [@R-igraph], `pdftools` [@R-pdftools], `readr` [@R-readr], `reshape2` [@R-reshape2], `stringr` [@R-stringr], `text2vec` [@R-text2vec], `textdata` [@R-textdata], `tidyr` [@R-tidyr], `tidytext` [@R-tidytext], `tm` [@R-tm], `tools` [@R-tools], `topicmodels` [@R-topicmodels], `widyr` [@R-widyr],
`word2vec` [@R-word2vec], `wordcloud` [@R-wordcloud].

References
===============
